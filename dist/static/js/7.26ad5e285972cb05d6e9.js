webpackJsonp([7],{178:function(e,t,n){function a(e){n(255)}var r=n(12)(n(266),n(246),a,null,null);e.exports=r.exports},235:function(e,t,n){t=e.exports=n(173)(!0),t.push([e.i,".input-area{position:relative;text-align:center;width:50%;margin-left:25%}","",{version:3,sources:["C:/Users/gwj12/Desktop/frontend_club/src/pages/login.vue"],names:[],mappings:"AACA,YACI,kBAAmB,AACnB,kBAAmB,AACnB,UAAW,AACX,eAAiB,CACpB",file:"login.vue",sourcesContent:["\n.input-area {\n    position: relative;\n    text-align: center;\n    width: 50%;\n    margin-left: 25%;\n}\n"],sourceRoot:""}])},246:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}},[n("main",{attrs:{id:"main"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18,id:"content",offset:3}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-card",{staticClass:"box-card"},[n("header",{staticClass:"clearfix",attrs:{id:"panel-header"},slot:"header"},[n("span",[e._v("登录")])]),e._v(" "),n("main",[n("div",{staticClass:"input-area"},[n("el-form",{ref:"form",attrs:{"label-width":"80px"},on:{submit:function(t){t.preventDefault(),e.login(t)}}},[n("el-form-item",{attrs:{label:"token"}},[n("el-input",{attrs:{maxlength:36,minlength:36,placeholder:"请输入个人accesstoken..."},model:{value:e.at,callback:function(t){e.at="string"==typeof t?t.trim():t},expression:"at"}})],1),e._v(" "),n("el-form-item",[e.redirect?n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.goBack(t)}}},[n("i",{staticClass:"el-icon-caret-left"}),e._v("返回上一页")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.login(t)}}},[e._v("登录")])],1)],1)],1)])])],1)])],1)],1)])},staticRenderFns:[]}},255:function(e,t,n){var a=n(235);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(174)("6c0df410",a,!0)},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var a=n(79),r=n.n(a);t.default={data:function(){return{at:"",alert:{title:"",type:"",description:""},redirect:this.$route.query.redirect||""}},mounted:function(){},methods:{goBack:function(){var e=decodeURIComponent(this.$route.query.redirect);this.$router.replace(e)},login:function(){var t=this,n=this,a=n.at;if(!a)return void n.$message({showClose:!0,message:"token格式错误，可从官网个人设置页面获取",type:"error"});this.setLoading(!0),e.ajax({type:"POST",url:"https://cnodejs.org/api/v1/accesstoken",dataType:"json",data:{accesstoken:a}}).done(function(e){if(t.setLoading(!1),!e||!e.success)return void n.errorHandle();var o={id:e.id,loginname:e.loginname,avatar:e.avatar_url,accesstoken:a,score:null,message:null};r()(o).forEach(function(e){localStorage[e]=o[e]}),t.$store.dispatch("setUserInfo",o).then(function(){n.$message({showClose:!0,message:"登录成功",type:"success",onClose:function(){var e=decodeURIComponent(n.$route.query.redirect||"/");n.$router.replace(e)}})})}).fail(function(e){t.setLoading(!1),n.errorHandle()})},errorHandle:function(){self.$message({showClose:!0,message:"登录出错，请稍候再试！",type:"warning"})},setLoading:function(e){this.$store.commit("setLoading",e)}}}}.call(t,n(22))}});
//# sourceMappingURL=7.26ad5e285972cb05d6e9.js.map
{"version":3,"sources":["webpack:///static/js/7.a1de8819e69f71c43306.js","webpack:///./src/pages/login.vue","webpack:///./src/pages/login.vue?58e7","webpack:///./src/pages/login.vue?7781","webpack:///./src/pages/login.vue?243f","webpack:///login.vue"],"names":["webpackJsonp","178","module","exports","__webpack_require__","injectStyle","ssrContext","Component","235","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","247","render","_vm","this","_h","$createElement","_c","_self","attrs","id","gutter","span","offset","staticClass","slot","_v","ref","label-width","on","submit","$event","preventDefault","login","label","maxlength","minlength","placeholder","model","value","callback","$$v","loginid","trim","expression","password","type","nativeOn","click","goBack","_e","staticRenderFns","257","content","locals","270","__webpack_exports__","Object","defineProperty","$","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","n","data","alert","title","description","redirect","$route","query","mounted","methods","decodeURIComponent","$router","replace","_this","self","$message","showClose","message","setLoading","ajax","url","dataType","done","res","success","errorHandle","user","loginname","username","avatar","avatar_url","accesstoken","score","forEach","v","localStorage","$store","dispatch","then","onClose","fail","error","state","commit","call"],"mappings":"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","file":"static/js/7.a1de8819e69f71c43306.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 178:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(257)\n}\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(270),\n  /* template */\n  __webpack_require__(247),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 235:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(173)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".input-area{position:relative;text-align:center;width:50%;margin-left:25%}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/gwj12/Desktop/frontend_club/src/pages/login.vue\"],\"names\":[],\"mappings\":\"AACA,YACI,kBAAmB,AACnB,kBAAmB,AACnB,UAAW,AACX,eAAiB,CACpB\",\"file\":\"login.vue\",\"sourcesContent\":[\"\\n.input-area {\\r\\n    position: relative;\\r\\n    text-align: center;\\r\\n    width: 50%;\\r\\n    margin-left: 25%;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"container\"\n    }\n  }, [_c('main', {\n    attrs: {\n      \"id\": \"main\"\n    }\n  }, [_c('el-row', {\n    attrs: {\n      \"gutter\": 20\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 18,\n      \"id\": \"content\",\n      \"offset\": 3\n    }\n  }, [_c('div', {\n    staticClass: \"grid-content bg-purple\"\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('header', {\n    staticClass: \"clearfix\",\n    attrs: {\n      \"id\": \"panel-header\"\n    },\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"登录\")])]), _vm._v(\" \"), _c('main', [_c('div', {\n    staticClass: \"input-area\"\n  }, [_c('el-form', {\n    ref: \"form\",\n    attrs: {\n      \"label-width\": \"80px\"\n    },\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.login($event)\n      }\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"用户名\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"maxlength\": 36,\n      \"minlength\": 36,\n      \"placeholder\": \"请输入登陆账号...\"\n    },\n    model: {\n      value: (_vm.loginid),\n      callback: function($$v) {\n        _vm.loginid = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"loginid\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"密码\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"maxlength\": 36,\n      \"minlength\": 36,\n      \"placeholder\": \"请输入密码...\"\n    },\n    model: {\n      value: (_vm.password),\n      callback: function($$v) {\n        _vm.password = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [(_vm.redirect) ? _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.goBack($event)\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-caret-left\"\n  }), _vm._v(\"返回上一页\")]) : _vm._e(), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.login($event)\n      }\n    }\n  }, [_vm._v(\"登录\")])], 1)], 1)], 1)])])], 1)])], 1)], 1)])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(235);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(174)(\"6c0df410\", content, true);\n\n/***/ }),\n\n/***/ 270:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            loginid: \"\",\n            password: '',\n            alert: {\n                title: \"\",\n                type: \"\",\n                description: \"\"\n            },\n            redirect: this.$route.query.redirect || \"\"\n        };\n    },\n    mounted: function mounted() {},\n\n    methods: {\n        goBack: function goBack() {\n            var redirect = decodeURIComponent(this.$route.query.redirect);\n            this.$router.replace(redirect);\n        },\n        login: function login() {\n            var _this = this;\n\n            var self = this,\n                accesstoken = self.loginid;\n            if (!accesstoken) {\n                self.$message({\n                    showClose: true,\n                    message: \"请输入登陆账号\",\n                    type: \"error\"\n                });\n                return;\n            }\n            this.setLoading(true);\n            $.ajax({\n                type: \"POST\",\n                url: 'http://119.23.245.101:8080/User/login',\n                data: {\n                    loginid: self.loginid,\n                    password: self.password\n                },\n                dataType: 'json'\n            }).done(function (res) {\n                _this.setLoading(false);\n                if (!res || !res.success) {\n                    self.errorHandle();\n                    return;\n                }\n                res = res.data;\n                var user = {\n                    id: res.id,\n                    loginname: res.username,\n                    avatar: res.avatar_url,\n                    accesstoken: res.loginid,\n                    score: null,\n                    message: null\n                };\n\n                __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(user).forEach(function (v) {\n                    localStorage[v] = user[v];\n                });\n                _this.$store.dispatch(\"setUserInfo\", user).then(function () {\n                    self.$message({\n                        showClose: true,\n                        message: \"登录成功\",\n                        type: \"success\",\n                        onClose: function onClose() {\n                            var redirect = decodeURIComponent(self.$route.query.redirect || \"/\");\n                            self.$router.replace(redirect);\n                        }\n                    });\n                });\n            }).fail(function (error) {\n                _this.setLoading(false);\n                self.errorHandle();\n            });\n        },\n        errorHandle: function errorHandle() {\n            self.$message({\n                showClose: true,\n                message: \"登录出错，请稍候再试！\",\n                type: \"warning\"\n            });\n        },\n        setLoading: function setLoading(state) {\n            this.$store.commit(\"setLoading\", state);\n        }\n    }\n});\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(22)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.a1de8819e69f71c43306.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.2.1.0@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.12.1.0@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c663849\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.12.1.0@vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar Component = require(\"!../../node_modules/.12.1.0@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.12.1.0@vue-loader/lib/selector?type=script&index=0!./login.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.12.1.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c663849\\\"}!../../node_modules/.12.1.0@vue-loader/lib/selector?type=template&index=0!./login.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login.vue\n// module id = 178\n// module chunks = 7","exports = module.exports = require(\"../../node_modules/.0.28.3@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".input-area{position:relative;text-align:center;width:50%;margin-left:25%}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/gwj12/Desktop/frontend_club/src/pages/login.vue\"],\"names\":[],\"mappings\":\"AACA,YACI,kBAAmB,AACnB,kBAAmB,AACnB,UAAW,AACX,eAAiB,CACpB\",\"file\":\"login.vue\",\"sourcesContent\":[\"\\n.input-area {\\r\\n    position: relative;\\r\\n    text-align: center;\\r\\n    width: 50%;\\r\\n    margin-left: 25%;\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.28.3@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/.12.1.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6c663849\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.12.1.0@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/login.vue\n// module id = 235\n// module chunks = 7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"container\"\n    }\n  }, [_c('main', {\n    attrs: {\n      \"id\": \"main\"\n    }\n  }, [_c('el-row', {\n    attrs: {\n      \"gutter\": 20\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 18,\n      \"id\": \"content\",\n      \"offset\": 3\n    }\n  }, [_c('div', {\n    staticClass: \"grid-content bg-purple\"\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('header', {\n    staticClass: \"clearfix\",\n    attrs: {\n      \"id\": \"panel-header\"\n    },\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"登录\")])]), _vm._v(\" \"), _c('main', [_c('div', {\n    staticClass: \"input-area\"\n  }, [_c('el-form', {\n    ref: \"form\",\n    attrs: {\n      \"label-width\": \"80px\"\n    },\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.login($event)\n      }\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"用户名\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"maxlength\": 36,\n      \"minlength\": 36,\n      \"placeholder\": \"请输入登陆账号...\"\n    },\n    model: {\n      value: (_vm.loginid),\n      callback: function($$v) {\n        _vm.loginid = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"loginid\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"密码\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"maxlength\": 36,\n      \"minlength\": 36,\n      \"placeholder\": \"请输入密码...\"\n    },\n    model: {\n      value: (_vm.password),\n      callback: function($$v) {\n        _vm.password = (typeof $$v === 'string' ? $$v.trim() : $$v)\n      },\n      expression: \"password\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [(_vm.redirect) ? _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.goBack($event)\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"el-icon-caret-left\"\n  }), _vm._v(\"返回上一页\")]) : _vm._e(), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.login($event)\n      }\n    }\n  }, [_vm._v(\"登录\")])], 1)], 1)], 1)])])], 1)])], 1)], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.1.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-6c663849\"}!./~/.12.1.0@vue-loader/lib/selector.js?type=template&index=0!./src/pages/login.vue\n// module id = 247\n// module chunks = 7","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/.0.28.3@css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.12.1.0@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c663849\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/.12.1.0@vue-loader/lib/selector.js?type=styles&index=0!./login.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/.3.0.1@vue-style-loader/lib/addStylesClient.js\")(\"6c0df410\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.1.0@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/.3.0.1@vue-style-loader!./~/.0.28.3@css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/.12.1.0@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-6c663849\",\"scoped\":false,\"hasInlineConfig\":false}!./~/.12.1.0@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/login.vue\n// module id = 257\n// module chunks = 7","<template lang=\"html\">\r\n    <div id=\"container\">\r\n    <main id=\"main\">\r\n        <el-row :gutter=\"20\">\r\n            <el-col :span=\"18\" id=\"content\" :offset=\"3\">\r\n                <div class=\"grid-content bg-purple\">\r\n                    <el-card class=\"box-card\">\r\n                        <header slot=\"header\" class=\"clearfix\" id=\"panel-header\">\r\n                            <span>登录</span>\r\n                        </header>\r\n                        <main>\r\n                            <div class=\"input-area\">\r\n                              <el-form ref=\"form\" label-width=\"80px\" @submit.prevent=\"login\">\r\n                                <el-form-item label=\"用户名\">\r\n                                  <el-input v-model.trim=\"loginid\" :maxlength=\"36\" :minlength='36' placeholder=\"请输入登陆账号...\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item label=\"密码\">\r\n                                  <el-input v-model.trim=\"password\" :maxlength=\"36\" :minlength='36' placeholder=\"请输入密码...\"></el-input>\r\n                                </el-form-item>\r\n                                <el-form-item>\r\n                                    <el-button type=\"primary\" @click.native=\"goBack\" v-if=\"redirect\"><i class=\"el-icon-caret-left\"></i>返回上一页</el-button>\r\n                                    <el-button type=\"primary\" @click.native=\"login\">登录</el-button>\r\n                                </el-form-item>\r\n                              </el-form>\r\n                            </div>\r\n                        </main>\r\n                    </el-card>\r\n                </div>\r\n            </el-col>\r\n          </el-row>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            loginid: \"\",\r\n            password: '',\r\n            alert: {\r\n                title: \"\",\r\n                type: \"\",\r\n                description: \"\",\r\n            },\r\n            redirect: this.$route.query.redirect || \"\"\r\n        }\r\n    },\r\n    mounted() { },\r\n    methods: {\r\n        goBack() {\r\n            let redirect = decodeURIComponent(this.$route.query.redirect);\r\n            this.$router.replace(redirect);\r\n        },\r\n        login() {\r\n            let self = this,\r\n                accesstoken = self.loginid;\r\n            if (!accesstoken) {\r\n                self.$message({\r\n                    showClose: true,\r\n                    message: \"请输入登陆账号\",\r\n                    type: \"error\"\r\n                })\r\n                return;\r\n            }\r\n            this.setLoading(true);\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: 'http://119.23.245.101:8080/User/login',\r\n                data: {\r\n                    loginid: self.loginid,\r\n                    password: self.password\r\n                },\r\n                dataType: 'json'\r\n            }).done((res) => {\r\n                this.setLoading(false);\r\n                if (!res || !res.success) {\r\n                    self.errorHandle();\r\n                    return;\r\n                }\r\n                res = res.data;\r\n                let user = {\r\n                    id: res.id,\r\n                    loginname: res.username,\r\n                    avatar: res.avatar_url,\r\n                    accesstoken: res.loginid,\r\n                    score: null,\r\n                    message: null\r\n                };\r\n                //由于vuex在页面刷新时会把state清空（什么鬼呀）\r\n                //所以此处得把user信息存入localStorage\r\n                Object.keys(user).forEach(v => {\r\n                    localStorage[v] = user[v];\r\n                });\r\n                this.$store.dispatch(\"setUserInfo\", user).then(() => {\r\n                    self.$message({\r\n                        showClose: true,\r\n                        message: \"登录成功\",\r\n                        type: \"success\",\r\n                        onClose() {\r\n                            let redirect = decodeURIComponent(self.$route.query.redirect || \"/\");\r\n                            self.$router.replace(redirect);\r\n                        }\r\n                    });\r\n                });\r\n            }).fail((error) => {\r\n                this.setLoading(false);\r\n                self.errorHandle();\r\n            });\r\n        },\r\n        errorHandle() {\r\n            self.$message({\r\n                showClose: true,\r\n                message: \"登录出错，请稍候再试！\",\r\n                type: \"warning\"\r\n            });\r\n        },\r\n        setLoading(state) {\r\n            this.$store.commit(\"setLoading\", state);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"css\">\r\n.input-area {\r\n    position: relative;\r\n    text-align: center;\r\n    width: 50%;\r\n    margin-left: 25%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// login.vue?c7496fce"],"sourceRoot":""}
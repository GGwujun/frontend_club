webpackJsonp([3],{179:function(e,s,t){function a(e){t(254)}var n=t(12)(t(267),t(245),a,null,null);e.exports=n.exports},183:function(e,s,t){e.exports={default:t(190),__esModule:!0}},190:function(e,s,t){t(192);var a=t(5).Object;e.exports=function(e,s,t){return a.defineProperty(e,s,t)}},192:function(e,s,t){var a=t(14);a(a.S+a.F*!t(10),"Object",{defineProperty:t(13).f})},193:function(e,s,t){s=e.exports=t(173)(!0),s.push([e.i,".author-avatar{max-width:100%;display:block;padding:20px;text-align:center;border-bottom:1px solid hsla(0,0%,63%,.2)}.author-avatar img{width:auto;max-width:100%;max-height:100px;left:0;right:0;top:0;bottom:0}.author-info{padding:20px;border-bottom:1px solid hsla(0,0%,63%,.2)}.author-name{line-height:48px;font-size:24px;font-weight:300;color:#212121}.author-name:hover{text-decoration:underline}.author-detail .author-score{color:#838383}.author-recent-topic.title{padding:18px 20px;border-bottom:1px solid hsla(0,0%,63%,.2)}.topic-list ul{list-style:none}.topic-list li{line-height:1.5;border-bottom:1px solid hsla(0,0%,63%,.2);padding:10px}.topic-list a{color:#838383}","",{version:3,sources:["C:/Users/gwj12/Desktop/frontend_club/src/components/aside.vue"],names:[],mappings:"AACA,eACI,eAAgB,AAChB,cAAe,AACf,aAAc,AACd,kBAAmB,AACnB,yCAAkD,CACrD,AACD,mBACI,WAAY,AACZ,eAAgB,AAChB,iBAAkB,AAClB,OAAQ,AACR,QAAS,AACT,MAAO,AACP,QAAU,CACb,AACD,aACI,aAAc,AACd,yCAAkD,CACrD,AACD,aACI,iBAAkB,AAClB,eAAgB,AAChB,gBAAiB,AACjB,aAAe,CAClB,AACD,mBACI,yBAA2B,CAC9B,AACD,6BACI,aAAe,CAClB,AACD,2BACI,kBAAmB,AACnB,yCAAkD,CACrD,AACD,eACI,eAAiB,CACpB,AACD,eACI,gBAAiB,AACjB,0CAAkD,AAClD,YAAc,CACjB,AACD,cACI,aAAe,CAClB",file:"aside.vue",sourcesContent:["\n.author-avatar {\r\n    max-width: 100%;\r\n    display: block;\r\n    padding: 20px;\r\n    text-align: center;\r\n    border-bottom: 1px solid rgba(160, 160, 160, 0.2);\n}\n.author-avatar img {\r\n    width: auto;\r\n    max-width: 100%;\r\n    max-height: 100px;\r\n    left: 0;\r\n    right: 0;\r\n    top: 0;\r\n    bottom: 0;\n}\n.author-info {\r\n    padding: 20px;\r\n    border-bottom: 1px solid rgba(160, 160, 160, 0.2);\n}\n.author-name {\r\n    line-height: 48px;\r\n    font-size: 24px;\r\n    font-weight: 300;\r\n    color: #212121;\n}\n.author-name:hover {\r\n    text-decoration: underline;\n}\n.author-detail .author-score {\r\n    color: #838383;\n}\n.author-recent-topic.title {\r\n    padding: 18px 20px;\r\n    border-bottom: 1px solid rgba(160, 160, 160, 0.2);\n}\n.topic-list ul {\r\n    list-style: none;\n}\n.topic-list li {\r\n    line-height: 1.5;\r\n    border-bottom: 1px solid rgba(160, 160, 160, 0.2);\r\n    padding: 10px;\n}\n.topic-list a {\r\n    color: #838383;\n}\r\n"],sourceRoot:""}])},194:function(e,s,t){function a(e){t(196)}var n=t(12)(t(200),t(195),a,null,null);e.exports=n.exports},195:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.author.username?t("el-card",{attrs:{"body-style":e.bodyStyle}},[t("div",{staticClass:"clearfix",slot:"header"},[e.hasRecent?t("span",[e._v("作者信息")]):t("span",[e._v("个人信息")])]),e._v(" "),t("div",{staticClass:"text"},[t("router-link",{staticClass:"author-avatar",attrs:{to:{name:"user",params:{name:e.author.loginid}}}},[t("img",{staticClass:"img",attrs:{src:e.author.avatar_url,alt:""}})]),e._v(" "),t("section",{staticClass:"author-info"},[t("router-link",{staticClass:"author-name",attrs:{to:{name:"user",params:{name:e.author.loginid}}}},[t("span",{domProps:{textContent:e._s(e.author.username)}})]),e._v(" "),t("p",{staticClass:"author-detail"},[t("span",{staticClass:"author-score"},[e._v("积分："+e._s(e.author.score))])])],1)],1)]):e._e()},staticRenderFns:[]}},196:function(e,s,t){var a=t(193);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(174)("1ef0af6a",a,!0)},199:function(e,s,t){"use strict";s.__esModule=!0;var a=t(183),n=function(e){return e&&e.__esModule?e:{default:e}}(a);s.default=function(e,s,t){return s in e?(0,n.default)(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}},200:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){var a=t(199),n=t.n(a);s.default={data:function(){var e;return{author:{},bodyStyle:(e={display:"-webkit-flex"},n()(e,"display","ms-flex"),n()(e,"display","flex"),n()(e,"padding",0),n()(e,"flexDirection","column"),n()(e,"position","relative"),e)}},props:["authorId","topicId","hasRecent"],computed:{recentLength:function(){var e=this.author.recent_topics.length;return e>10&&10||e}},created:function(){this.authorId&&this.fetchUserInfo()},mounted:function(){},watch:{authorId:function(){this.authorId&&this.fetchUserInfo()}},methods:{fetchUserInfo:function(){var s=this,t=this;e.ajax({url:"http://119.23.245.101:8080/User/GetUserid",type:"GET",data:{id:t.authorId}}).done(function(e){e&&e.success&&(s.author=e.data,console.log(s.author),s.author.recent_topics=[])}).fail(function(e){})},goToTopic:function(e){e&&this.$router.push({name:"topic",params:{id:e}})}}}}.call(s,t(22))},234:function(e,s,t){s=e.exports=t(173)(!0),s.push([e.i,".messages .message-item{border-top:1px solid #f0f0f0;padding:10px 0}.messages .message-item:first-of-type{border-top:none;padding-top:0}.messages .message-item .messager-avatar{display:inline-block}.messages .message-item .messager-avatar img{width:30px;height:30px}.messages .message-item .link{color:#20a0ff}.message-content{display:inline-block}.messages .message-item .message-time{float:right;text-align:right;min-width:50px;display:inline-block;white-space:nowrap;color:#778087;font-size:11px}","",{version:3,sources:["C:/Users/gwj12/Desktop/frontend_club/src/pages/message.vue"],names:[],mappings:"AACA,wBACI,6BAA8B,AAC9B,cAAgB,CACnB,AACD,sCACI,gBAAiB,AACjB,aAAe,CAClB,AACD,yCACI,oBAAsB,CACzB,AACD,6CACI,WAAY,AACZ,WAAa,CAChB,AACD,8BACI,aAAe,CAClB,AACD,iBACI,oBAAsB,CACzB,AACD,sCACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,qBAAsB,AACtB,mBAAoB,AACpB,cAAe,AACf,cAAgB,CACnB",file:"message.vue",sourcesContent:["\n.messages .message-item {\r\n    border-top: 1px solid #f0f0f0;\r\n    padding: 10px 0;\n}\n.messages .message-item:nth-of-type(1) {\r\n    border-top: none;\r\n    padding-top: 0;\n}\n.messages .message-item .messager-avatar {\r\n    display: inline-block;\n}\n.messages .message-item .messager-avatar img {\r\n    width: 30px;\r\n    height: 30px;\n}\n.messages .message-item .link {\r\n    color: #20a0ff;\n}\n.message-content {\r\n    display: inline-block;\n}\n.messages .message-item .message-time {\r\n    float: right;\r\n    text-align: right;\r\n    min-width: 50px;\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n    color: #778087;\r\n    font-size: 11px;\n}\r\n"],sourceRoot:""}])},245:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"container"}},[t("main",{attrs:{id:"main"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",slot:"header"},[t("div",[t("span",[e._v("新消息")]),e._v(" "),t("el-badge",{staticClass:"mark",attrs:{value:e.messages.hasnot_read_messages.length,max:99}}),e._v(" "),t("el-button",{staticStyle:{float:"right"},nativeOn:{click:function(s){e.markAll(s)}}},[e._v("全部已读")])],1)]),e._v(" "),t("main",{staticClass:"hasnot-read-messages messages"},[e.messages.hasnot_read_messages.length?t("ul",{staticClass:"hasnot-read-list"},e._l(e.messages.hasnot_read_messages,function(s){return t("li",{staticClass:"message-item hasnot-read-item"},[t("router-link",{staticClass:"messager-avatar",attrs:{to:{name:"user",params:{name:s.author.loginname}}}},[t("img",{attrs:{src:s.author.avatar_url,alt:""}})]),e._v(" "),t("router-link",{staticClass:"messager-name link",attrs:{to:{name:"user",params:{name:s.author.loginname}}}},[e._v("\n                                              "+e._s(s.author.loginname)+"\n                                          ")]),e._v(" "),t("p",{staticClass:"message-content"},["at"==s.type?t("span",[e._v("在话题")]):e._e(),e._v(" "),"reply"==s.type?t("span",[e._v("回复了您的话题")]):e._e(),e._v(" "),t("router-link",{staticClass:"message-topic link",attrs:{to:{name:"topic",params:{id:s.topic.id}}}},[e._v("\n                                                  "+e._s(s.topic.title)+"\n                                              ")]),e._v(" "),"at"==s.type?t("span",[e._v("@了您")]):e._e()],1),e._v(" "),t("span",{staticClass:"message-time"},[e._v(e._s(e._f("getDateFromNow")(s.create_at)))])],1)})):t("span",{staticClass:"noData"},[e._v("暂无消息")])])])],1)])],1),e._v(" "),t("el-row",{staticClass:"cv-panel"},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"grid-content bg-purple"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",slot:"header"},[t("div",[t("span",[e._v("已读消息")]),e._v(" "),t("el-badge",{staticClass:"mark",attrs:{value:e.messages.has_read_messages.length,max:99}})],1)]),e._v(" "),t("main",{staticClass:"has-read-messages messages"},[e.messages.has_read_messages.length?t("ul",{staticClass:"has-read-list"},e._l(e.messages.has_read_messages,function(s){return t("li",{staticClass:"message-item has-read-item"},[t("router-link",{staticClass:"messager-avatar",attrs:{to:{name:"user",params:{name:s.author.loginname}}}},[t("img",{attrs:{src:s.author.avatar_url,alt:""}})]),e._v(" "),t("router-link",{staticClass:"messager-name link",attrs:{to:{name:"user",params:{name:s.author.loginname}}}},[e._v("\n                                              "+e._s(s.author.loginname)+"\n                                          ")]),e._v(" "),t("p",{staticClass:"message-content"},["at"==s.type?t("span",[e._v("在话题")]):e._e(),e._v(" "),"reply"==s.type?t("span",[e._v("回复了您的话题")]):e._e(),e._v(" "),t("router-link",{staticClass:"message-topic link",attrs:{to:{name:"topic",params:{id:s.topic.id}}}},[e._v("\n                                                  "+e._s(s.topic.title)+"\n                                              ")]),e._v(" "),"at"==s.type?t("span",[e._v("@了您")]):e._e()],1),e._v(" "),t("span",{staticClass:"message-time"},[e._v(e._s(e._f("getDateFromNow")(s.create_at)))])],1)})):t("span",{staticClass:"noData"},[e._v("暂无消息")])])])],1)])],1)],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"grid-content bg-purple"},[e.user.loginname?t("cvAside",{attrs:{"author-name":e.user.loginname,hasRecent:!1}}):e._e()],1)])],1)],1)])},staticRenderFns:[]}},254:function(e,s,t){var a=t(234);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(174)("593ac2e4",a,!0)},267:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),function(e){var a=t(67),n=t.n(a),r=t(194),o=t.n(r),i=t(25);s.default={data:function(){return{messages:{has_read_messages:[],hasnot_read_messages:[]}}},computed:t.i(i.a)({user:"getUserInfo"}),created:function(){this.user.accesstoken&&this.fetchMessages()},mounted:function(){},methods:{fetchMessages:function(){var s=this;this.setLoading(!0);var t=this;e.ajax({url:"https://cnodejs.org/api/v1/messages",type:"GET",data:{accesstoken:t.user.accesstoken}}).done(function(e){if(t.setLoading(!1),!e||!e.success)return void t.$message({showClose:!0,message:"数据获取失败，请稍后再试！",type:"warning"});t.messages=e.data||t.messages}).fail(function(e){s.setLoading(!1),t.$message({showClose:!0,message:"数据获取失败，请稍后再试！",type:"warning"})})},markAll:function(){var s=this;if(this.user.accesstoken){if(this.messages.hasnot_read_messages.length<1)return void this.$message({showClose:!0,message:"暂无未读消息",type:"info"});this.setLoading(!0);var t=this;e.ajax({url:"https://cnodejs.org/api/v1/message/mark_all",type:"POST",dataType:"json",data:{accesstoken:t.user.accesstoken}}).done(function(e){if(s.setLoading(!1),!e||!e.success)return void t.$message({showClose:!0,message:"操作失败",type:"warning"});t.messages.has_read_messages=t.messages.hasnot_read_messages.concat(t.messages.has_read_messages),t.messages.hasnot_read_messages=[],t.$message({showClose:!0,message:"消息全部设置已读！",type:"success"}),t.$store.commit("setValue",{key:"message",value:0}),localStorage.message=0}).fail(function(e){s.setLoading(!1),t.$message({showClose:!0,message:"操作失败",type:"warning"})})}},setLoading:function(e){this.$store.commit("setLoading",e)}},components:{cvHead:n.a,cvAside:o.a}}}.call(s,t(22))}});
//# sourceMappingURL=3.ce72ae6c5e764346a692.js.map
webpackJsonp([7],{178:function(e,t,n){function r(e){n(257)}var i=n(12)(n(270),n(247),r,null,null);e.exports=i.exports},235:function(e,t,n){t=e.exports=n(173)(!0),t.push([e.i,".input-area{position:relative;text-align:center;width:50%;margin-left:25%}","",{version:3,sources:["C:/Users/gwj12/Desktop/frontend_club/src/pages/login.vue"],names:[],mappings:"AACA,YACI,kBAAmB,AACnB,kBAAmB,AACnB,UAAW,AACX,eAAiB,CACpB",file:"login.vue",sourcesContent:["\n.input-area {\r\n    position: relative;\r\n    text-align: center;\r\n    width: 50%;\r\n    margin-left: 25%;\n}\r\n"],sourceRoot:""}])},247:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}},[n("main",{attrs:{id:"main"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:18,id:"content",offset:3}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-card",{staticClass:"box-card"},[n("header",{staticClass:"clearfix",attrs:{id:"panel-header"},slot:"header"},[n("span",[e._v("登录")])]),e._v(" "),n("main",[n("div",{staticClass:"input-area"},[n("el-form",{ref:"form",attrs:{"label-width":"80px"},on:{submit:function(t){t.preventDefault(),e.login(t)}}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{attrs:{maxlength:36,minlength:36,placeholder:"请输入登陆账号..."},model:{value:e.loginid,callback:function(t){e.loginid="string"==typeof t?t.trim():t},expression:"loginid"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{maxlength:36,minlength:36,placeholder:"请输入密码..."},model:{value:e.password,callback:function(t){e.password="string"==typeof t?t.trim():t},expression:"password"}})],1),e._v(" "),n("el-form-item",[e.redirect?n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.goBack(t)}}},[n("i",{staticClass:"el-icon-caret-left"}),e._v("返回上一页")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.login(t)}}},[e._v("登录")])],1)],1)],1)])])],1)])],1)],1)])},staticRenderFns:[]}},257:function(e,t,n){var r=n(235);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(174)("6c0df410",r,!0)},270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var r=n(27),i=n.n(r);t.default={data:function(){return{loginid:"",password:"",alert:{title:"",type:"",description:""},redirect:this.$route.query.redirect||""}},mounted:function(){},methods:{goBack:function(){var e=decodeURIComponent(this.$route.query.redirect);this.$router.replace(e)},login:function(){var t=this,n=this;if(!n.loginid)return void n.$message({showClose:!0,message:"请输入登陆账号",type:"error"});this.setLoading(!0),e.ajax({type:"POST",url:"http://119.23.245.101:8080/User/login",data:{loginid:n.loginid,password:n.password},dataType:"json"}).done(function(e){if(t.setLoading(!1),!e||!e.success)return void n.errorHandle();e=e.data;var r={id:e.id,loginname:e.username,avatar:e.avatar_url,accesstoken:e.loginid,score:null,message:null};i()(r).forEach(function(e){localStorage[e]=r[e]}),t.$store.dispatch("setUserInfo",r).then(function(){n.$message({showClose:!0,message:"登录成功",type:"success",onClose:function(){var e=decodeURIComponent(n.$route.query.redirect||"/");n.$router.replace(e)}})})}).fail(function(e){t.setLoading(!1),n.errorHandle()})},errorHandle:function(){self.$message({showClose:!0,message:"登录出错，请稍候再试！",type:"warning"})},setLoading:function(e){this.$store.commit("setLoading",e)}}}}.call(t,n(22))}});
//# sourceMappingURL=7.a1de8819e69f71c43306.js.map